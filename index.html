<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>屋内平面認識ARモデル</title>
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"></script>
  <style>
    body { margin: 0; overflow: hidden; }
  </style>
</head>
<body>

<script>
document.addEventListener('DOMContentLoaded', () => {
  const isiPhone = /iPhone|iPad|iPod/i.test(navigator.userAgent);

  if (isiPhone) {
    // iPhone / iPad用：Quick Look AR
    const modelViewer = document.createElement('model-viewer');
    modelViewer.setAttribute('src', 'model.glb');      // GLBも指定
    modelViewer.setAttribute('ios-src', 'model.usdz'); // USDZ必須
    modelViewer.setAttribute('ar', '');
    modelViewer.setAttribute('ar-modes', 'quick-look');
    modelViewer.setAttribute('camera-controls', '');
    modelViewer.setAttribute('auto-rotate', '');
    modelViewer.style.width = '100vw';
    modelViewer.style.height = '100vh';
    document.body.appendChild(modelViewer);

  } else if (/Android/i.test(navigator.userAgent)) {
    // Android用：Scene Viewerで平面認識AR
    const modelViewer = document.createElement('model-viewer');
    modelViewer.setAttribute('src', 'model.glb');
    modelViewer.setAttribute('ar', '');
    modelViewer.setAttribute('ar-modes', 'scene-viewer');
    modelViewer.setAttribute('camera-controls', '');
    modelViewer.setAttribute('auto-rotate', '');
    modelViewer.style.width = '100vw';
    modelViewer.style.height = '100vh';
    document.body.appendChild(modelViewer);

  } else {
    // PC：AR不可なので画面中央に表示
    const modelViewer = document.createElement('model-viewer');
    modelViewer.setAttribute('src', 'model.glb');
    modelViewer.setAttribute('camera-controls', '');
    modelViewer.setAttribute('auto-rotate', '');
    modelViewer.style.width = '100vw';
    modelViewer.style.height = '100vh';
    document.body.appendChild(modelViewer);
  }
});
</script>

</body>
</html>
